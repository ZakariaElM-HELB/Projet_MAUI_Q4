<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="MyApp.View.DetailsView"
             BackgroundColor="Transparent"
             Title="DetailsView">

    <Grid>
        <!-- ðŸ”™ Image de fond selon l'abonnement -->
        <Image Source="{Binding ProfileBackground}"
               Aspect="AspectFill"
               Opacity="0.15"
               IsVisible="{Binding ProfileBackground, Converter={StaticResource NullToBoolConverter}}"/>

        <!-- Contenu principal -->
        <ScrollView>
            <VerticalStackLayout Padding="25" Spacing="20">

                <!-- Image Profil -->
                <Image WidthRequest="120"
                       HeightRequest="120"
                       Aspect="AspectFill"
                       Source="{Binding ProfilePicture}">
                    <Image.Triggers>
                        <DataTrigger TargetType="Image" Binding="{Binding ProfilePicture}" Value="{x:Null}">
                            <Setter Property="Source" Value="default_profile.png"/>
                        </DataTrigger>
                        <DataTrigger TargetType="Image" Binding="{Binding ProfilePicture}" Value="">
                            <Setter Property="Source" Value="default_profile.png"/>
                        </DataTrigger>
                    </Image.Triggers>
                </Image>

                <!-- Informations du Membre -->
                <Border StrokeThickness="2" Stroke="White" Background="Transparent" Padding="20" StrokeShape="RoundRectangle 15">
                    <Grid ColumnDefinitions="1*, 2*" RowDefinitions="*,*,*,*" RowSpacing="15">

                        <Label Grid.Column="0" Grid.Row="0" Text="PrÃ©nom :" FontSize="18" TextColor="White"/>
                        <Label Grid.Column="1" Grid.Row="0" Text="{Binding FirstName}" FontSize="18" TextColor="White"/>

                        <Label Grid.Column="0" Grid.Row="1" Text="Nom :" FontSize="18" TextColor="White"/>
                        <Label Grid.Column="1" Grid.Row="1" Text="{Binding LastName}" FontSize="18" TextColor="White"/>

                        <Label Grid.Column="0" Grid.Row="2" Text="Ã‚ge :" FontSize="18" TextColor="White"/>
                        <Label Grid.Column="1" Grid.Row="2" Text="{Binding Age}" FontSize="18" TextColor="White"/>

                        <Label Grid.Column="0" Grid.Row="3" Text="Date de naissance :" FontSize="18" TextColor="White"/>
                        <Label Grid.Column="1" Grid.Row="3" Text="{Binding BirthDate}" FontSize="18" TextColor="White"/>

                        <Label Text="{Binding SubscriptionType, StringFormat='Abonnement : {0}'}"
                               FontSize="16"
                               TextColor="White"
                               HorizontalOptions="Center"
                               Grid.ColumnSpan="2"
                               Margin="0,10,0,0"/>
                    </Grid>
                </Border>

                <!-- ðŸ”˜ Bouton Statistique -->
                <HorizontalStackLayout Spacing="20" HorizontalOptions="Center">
                    <Button Text="Statistique"
                            FontSize="18"
                            BackgroundColor="#673AB7"
                            TextColor="White"
                            CornerRadius="10"
                            Clicked="OnStatsClicked"/>
                </HorizontalStackLayout>

            </VerticalStackLayout>
        </ScrollView>
    </Grid>
</ContentPage>
